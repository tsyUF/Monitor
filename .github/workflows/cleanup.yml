name: Delete old workflow runs

on:
  schedule:
    # Run every day at midnight UTC
    - cron: '0 0 * * *'
  workflow_dispatch:
    # Allows manual triggering from the GitHub UI

jobs:
  delete-runs:
    runs-on: ubuntu-latest
    permissions:
      actions: write  # Grant write permission for actions

    steps:
      - name: Delete old workflow runs
        uses: Monitor/delete-workflow-runs@v1
        with:
          repository: ${{ github.repository }}
          retain_days: 30 # Keep runs from the last 30 days
          keep_minimum_runs: 10 # Always keep at least 10 runs
          token: ${{ secrets.GITHUB_TOKEN }} # Use the default GitHub token
          dry_run: false # Set to true first to test what will be deleted
