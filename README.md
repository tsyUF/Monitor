# Multi-Target Monitoring System

This project implements a multi-target monitoring system that pings a list of specified hosts (IP addresses or URLs) to check their availability. It uses Python for the monitoring logic and Quarto to generate an HTML status report. The system is designed to be run via GitHub Actions, which automates the monitoring and report generation process.

## Features

*   Monitors multiple IP addresses and/or URLs via ICMP ping.
*   Generates individual status sparkline images for each monitored target.
*   Outputs detailed monitoring results to a JSON file (`data/results.json`).
*   Updates a general operational status JSON file (`docs/status.json`).
*   Integrates with GitHub Actions for scheduled and manual monitoring runs.
*   Presents results in a Quarto-generated HTML report (`docs/monitoring_report.html`).
*   Provides a main dashboard landing page (`docs/index.html`).

## How it Works

1.  **Trigger**: Monitoring is triggered by GitHub Actions workflows defined in `.github/workflows/run-monitor.yml` (for manual runs targeting `gh-pages`) and `.github/workflows/monitoring.yml` (can be scheduled, targets the main branch).
2.  **Monitoring Script**: The workflow executes the Python script `scripts/monitor.py`.
3.  **Target Configuration**: The script reads a list of targets from the `PING_TARGETS` environment variable, which is set within the GitHub Actions workflow.
4.  **Data Collection**: `scripts/monitor.py` pings each target, records its status ("Up" or "Down") and timestamp.
5.  **Output Generation**:
    *   The collected data is saved to `data/results.json`.
    *   Individual sparkline images (`docs/sparkline_<target_name>.png`) are generated for each target, visualizing its recent uptime.
    *   A general status file `docs/status.json` is updated.
6.  **Reporting**:
    *   The GitHub Actions workflow (typically `.github/workflows/monitoring.yml` if it includes a Quarto render step, or a separate workflow might handle rendering) renders the Quarto document `.github/workflows/monitor.qmd` into an HTML report, saved as `docs/monitoring_report.html`.
    *   `index.qmd` is rendered to `docs/index.html` and serves as the main landing page, linking to the detailed report.
7.  **Deployment**: Changes, including the JSON data, sparklines, and HTML report, are committed back to the repository and deployed to GitHub Pages (if configured, e.g., from the `docs` folder of the `gh-pages` branch or the main branch).

## Configuration

Targets for monitoring are defined by setting the `PING_TARGETS` environment variable within the GitHub Actions workflow files.

*   **File(s) to Edit**: `.github/workflows/run-monitor.yml` and/or `.github/workflows/monitoring.yml`
*   **Variable Name**: `PING_TARGETS`
*   **Format**: A comma-separated string of IP addresses or hostnames.

**Example `PING_TARGETS` in a workflow file:**
```yaml
env:
  PING_TARGETS: "google.com,8.8.8.8,github.com,nonexistentdomain.dev"
```

## Output Files

The primary outputs of the monitoring process are:

*   **`docs/index.html`**: The main dashboard landing page, providing an overview and a link to the detailed report.
*   **`docs/monitoring_report.html`**: The detailed HTML report generated by Quarto, showing status summaries and individual sparklines for all targets.
*   **`data/results.json`**: Contains the raw monitoring data for each target, including resource name, status (Up/Down), and timestamp of the check.
*   **`docs/sparkline_*.png`**: A set of PNG images, where each image is a sparkline visualizing the recent uptime history for a specific target (e.g., `docs/sparkline_google_com.png`).
*   **`docs/status.json`**: A simple JSON file indicating the overall server status and the last update time (this is a general status, not per target).

## Running Locally (for Development/Testing)

To run the monitoring script locally:

1.  **Clone the repository**:
    ```bash
    git clone <repository-url> # Replace <repository-url> with the actual URL
    cd Monitor # Or your repository name
    ```
2.  **Set up Python environment**:
    Ensure you have Python 3 installed. It's recommended to use a virtual environment.
    ```bash
    python3 -m venv .venv
    source .venv/bin/activate # On Linux/macOS
    # On Windows (Git Bash or WSL): source .venv/bin/activate
    # On Windows (Command Prompt): .venv\Scripts\activate.bat
    # On Windows (PowerShell): .venv\Scripts\Activate.ps1
    ```
3.  **Install dependencies**:
    The script `scripts/monitor.py` requires `pandas` and `matplotlib`.
    ```bash
    pip install pandas matplotlib
    ```
4.  **Set the environment variable**:
    ```bash
    export PING_TARGETS="google.com,8.8.8.8" # For Linux/macOS
    # For Windows (Command Prompt): set PING_TARGETS="google.com,8.8.8.8"
    # For Windows (PowerShell): $env:PING_TARGETS="google.com,8.8.8.8"
    ```
5.  **Run the script**:
    ```bash
    python scripts/monitor.py
    ```
    This will generate `data/results.json` and sparkline images in `docs/`.

    *Note: To generate the HTML report locally, you would also need to install Quarto and render the `.github/workflows/monitor.qmd` file, adjusting paths as necessary.*

## Viewing the Dashboard

The monitoring dashboard can be viewed by opening `docs/index.html` in a web browser. If deployed via GitHub Pages, it will be available at `https://<your-username>.github.io/<repository-name>/` (replace placeholders).

## Contributing

Contributions are welcome! If you have suggestions for improvements or find any issues, please feel free to open an issue or submit a pull request.

## License

This project is open-source. Please refer to the `LICENSE` file for more details. (It is recommended to add a `LICENSE` file, e.g., MIT License, if one does not exist.)
